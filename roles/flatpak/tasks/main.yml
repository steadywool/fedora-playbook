---
- name: Add Flathub remote
  community.general.flatpak_remote:
    name: flathub
    flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
    state: present
    method: system
  become: true
  tags: flatpak,flathub

- name: Install Flathub packages
  community.general.flatpak:
    name: "{{ flathub_applications }}"
    remote: flathub
    state: present
    method: system
  when: flathub_applications is defined
  become: true
  tags: flatpak,install